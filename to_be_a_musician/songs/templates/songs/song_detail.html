{% extends "base.html" %}

{% load i18n %}
{% load tinysong %}
{% load musician_extras %}

{% block site_title %}{{ object.name }} - {{ object.artist }}{% endblock %}

{% block class_body %}class="internas"{% endblock %}

{% block main %}
    <div class="row">
        <h2>{{ object.name }}</h2>

        {% if request.user.is_authenticated %}
        <p>{% learn_button user object %}</p>
        {% endif %}

        <p>{% blocktrans with artist=object.artist.name %}Performed by {{ artist }}.{% endblocktrans %}</p>
        <p>{% blocktrans with album=object.album.name %}From {{ album }}.{% endblocktrans %}</p>
        <p>{{object.api_id|flash_player}}</p>

        <p><a
            href="{% url 'songs_interpretation_add' artist_slug=object.artist.slug song_slug=object.slug %}">{% trans "Send your interpretation of this song" %}</a>
        </p>

        {% with last_interpretations=object.last_interpretations %}
            {% if last_interpretations %}
            <ul>
                {% for interpretation in last_interpretations %}
                <li>
                    <a href="{{ interpretation.get_absolute_url }}">
                        {% blocktrans with user=interpretation.user.username created_at=interpretation.created_at %}
                        Uploaded by {{ user }} at {{ created_at }}{% endblocktrans %}</a>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        {% endwith %}
    </div>
{% endblock %}
